#!/bin/bash

# File to update aliases
ALIASES_FILE="$HOME/.bash_aliases"

# Directory containing the executables
BIN_DIR="$HOME/bin"

# Check if the bin directory exists
if [ ! -d "$BIN_DIR" ]; then
    echo "Directory $BIN_DIR does not exist."
    exit 1
fi

# Backup existing .bash_aliases
if [ -f "$ALIASES_FILE" ]; then
    cp "$ALIASES_FILE" "${ALIASES_FILE}.bak"
    echo "Backup of existing .bash_aliases created at ${ALIASES_FILE}.bak"
fi

# Add aliases to .bash_aliases
echo "# Automatically generated aliases from $BIN_DIR" > "$ALIASES_FILE"
for file in "$BIN_DIR"/*; do
    if [ -x "$file" ] && [ -f "$file" ]; then
        filename=$(basename "$file")
        echo "alias $filename='$file'" >> "$ALIASES_FILE"
    fi
done

# Source the updated .bash_aliases
if [ -f "$ALIASES_FILE" ]; then
    . "$ALIASES_FILE"
    echo "Aliases updated and sourced from $ALIASES_FILE"
else
    echo "Failed to create or update $ALIASES_FILE"
    exit 1
fi

echo "All executable files in $BIN_DIR have been added to $ALIASES_FILE as aliases."
